---
import MainLayout from "../../layouts/MainLayout.astro";

export async function getStaticPaths() {
  const url = "https://cqlxxfhyqiyjfdhrylvn.supabase.co/rest/v1/events";
  const key = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNxbHh4Zmh5cWl5amZkaHJ5bHZuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3NDEwNTUsImV4cCI6MjA2MzMxNzA1NX0.dSKgfRJPrjOBnTq3LxqGMrMSXYqe-BQoGV1IjmFRWgk";

  const options = {
    headers: {
      apikey: key,
    },
  };

  const request = await fetch(url, options);
  const data = await request.json();

  return data.map((item) => {
    return {
      params: { slug: item.slug },
      props: { item },
    };
  });
}

const { item } = Astro.props;
---

<MainLayout title={`${item.name}`}>
  <section>
    <img src={item.images} alt="" />
    <div>
      <h1>{item.name}</h1>
      <p>{item.long_description}</p>
      <ul>
        <li>Dato:{item.date}</li>
        <li>Sted: {item.place}</li>
        <li>Tid:{item.time}</li>
      </ul>
    </div>
  </section>
</MainLayout>

<style>
  header {
    padding: 2rem;
  }
  h1,
  h2 {
    font-size: 1rem;
  }
  h2 {
    text-transform: uppercase;
  }
  p {
    max-width: 75ch;
  }
  img {
    max-width: 100%;
  }
  .images {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }
  .colors {
    display: flex;
    flex-direction: row;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }
</style>
